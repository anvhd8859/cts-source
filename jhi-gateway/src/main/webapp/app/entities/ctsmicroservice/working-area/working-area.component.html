<div class="row justify-content-center">
    <div class="col-lg-11">
        <br>
        <div class="container-fluid">
            <div class="row" style="border-bottom: 2px solid;">
                <div class="col-lg-6 col-md-12 col-md-12">
                    <h2 style="font-weight: bold;" id="page-heading">
                        <span>Quản lý khu vực làm việc</span>
                    </h2>
                </div>
                <div class="col-lg-6 col-md-12 col-md-12">
                    <button id="jh-create-entity" class="btn btn-primary float-right jh-create-entity create-working-area" [routerLink]="['/working-area/new']">
                        <fa-icon [icon]="'plus'"></fa-icon>
                        <span >
                        Tạo khu vực
                        </span>
                    </button>
                </div>
            </div>
        </div>
        <br>
        <jhi-alert></jhi-alert>
        <br/>
        <div class="card">
            <div class="card-header">
                <div class="row">
                    <div class="col-lg-3 col-md-6">
                        <div class="form-group">
                            <label for="province">Tỉnh/Thành phố</label>
                            <ng-select  [clearable]="false"
                                        [hideSelected]="true"
                                        [items]="this.lstProvince"
                                        bindLabel="provinceName"
                                        bindValue="id"
                                        id="province"
                                        name="province"
                                        [ngModelOptions]="{standalone: true}"
                                        [(ngModel)]="this.selectedProvince"
                                        (change)="this.changeCity()"
                                        >
                                <ng-option *ngFor="let item of lstProvince">{{item.provinceName}}</ng-option>
                            </ng-select>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="form-group">
                            <label for="district">Quận/Huyện</label>
                            <ng-select  [clearable]="false"
                                        [hideSelected]="true"
                                        [items]="this.lstDistrict"
                                        bindValue="id"
                                        bindLabel="districtName"
                                        id="district"
                                        name="district"
                                        [ngModelOptions]="{standalone: true}"
                                        [(ngModel)]="this.selectedDistrict"
                                        (change)="this.changeDistrict()"
                                        [disabled]="!this.selectedProvince"
                                        >
                                <ng-option *ngFor="let item of lstDistrict">{{item.districtName}}</ng-option>
                            </ng-select>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="form-group">
                            <label for="subDistrict">Phường/Xã</label>
                            <ng-select  [clearable]="false"
                                        [hideSelected]="true"
                                        [items]="this.lstSubDistrict"
                                        bindLabel="subDistrictName"
                                        bindValue="id"
                                        id="subDistrict"
                                        name="subDistrict"
                                        [ngModelOptions]="{standalone: true}"
                                        [(ngModel)]="this.selectedSubDistrict"
                                        (change)="this.changeSubDistrict()"
                                        [disabled]="!this.selectedDistrict"
                                        >
                                <ng-option *ngFor="let item of lstSubDistrict">{{item.subDistrictName}}</ng-option>
                            </ng-select>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="form-group">
                            <label for="street">Street</label>
                            <ng-select  [clearable]="false"
                                        [hideSelected]="true"
                                        [items]="this.lstStreet"
                                        bindLabel="streetName"
                                        bindValue="id"
                                        id="street"
                                        name="street"
                                        [ngModelOptions]="{standalone: true}"
                                        [(ngModel)]="this.selectedStreet"
                                        [disabled]="!this.selectedSubDistrict"
                                        >
                                <ng-option *ngFor="let item of lstStreet">{{item.streetName}}</ng-option>
                            </ng-select>
                        </div>
                    </div>
                </div>
                <br/>
                <div class="row">
                    <div class="col-lg-4 col-md-6 col-sm-6">
                        <div class="form-group">
                            <label for="type">Nhân viên:</label>
                            <ng-select  [clearable]="true"
                                        [hideSelected]="true"
                                        [items]="this.lstUser"
                                        bindLabel="email"
                                        id="field_customerId" name="field_customerId"
                                        [ngModelOptions]="{standalone: true}"
                                        [(ngModel)]="this.selectedUser">
                                    <ng-option *ngFor="let item of lstUser">{{item.email}}</ng-option>
                            </ng-select>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6 col-sm-6"></div>
                    <div class="col-lg-4 col-md-6 col-sm-6 text-center">
                        <div class="form-group">
                            <button style="margin-top: 30px" id="search" name="search" class="btn btn-primary"
                                (click)="this.loadAll()">
                                <fa-icon [icon]="'search'"></fa-icon>
                                <span>Tìm kiếm</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <br/>
            <div class="card-body">
                <div class="table-responsive" *ngIf="!areas || areas.length === 0">
                    <h2>Không tìm thấy dữ liệu</h2>
                </div>
                <div class="table-responsive" *ngIf="areas && areas.length > 0">
                    <table class="table table-striped">
                        <thead>
                        <tr>
                        <th><span>Mã Khu vực</span></th>
                        <th><span>Mã Đường/Phố</span></th>
                        <th><span>Tên Đường/Phố</span></th>
                        <th><span>Mã Nhân viên</span></th>
                        <th><span>Tên nhân viên</span></th>
                        <th><span>Email</span></th>
                        <th></th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let area of areas ;trackBy: trackId">
                            <td><a>{{area.workingArea.id}}</a></td>
                            <td>{{area.workingArea.streetId}}</td>
                            <td>{{area.streetName}}</td>
                            <td>{{area.workingArea.employeeId}}</td>
                            <td>{{findEmployee(area.workingArea.employeeId)}}</td>
                            <td>{{findEmail(area.workingArea.employeeId)}}</td>
                            <td class="text-right">
                                <div class="btn-group flex-btn-group-container">
                                    <button type="submit"
                                            [routerLink]="['/working-area', area.workingArea.id , 'edit']"
                                            class="btn btn-primary btn-sm">
                                        <fa-icon [icon]="'pencil-alt'"></fa-icon>
                                        <span class="d-none d-md-inline">Chỉnh sửa</span>
                                    </button>
                                    <button type="submit"
                                            [routerLink]="['/', { outlets: { popup: 'working-area/'+ area.workingArea.id + '/delete'} }]"
                                            replaceUrl="true"
                                            queryParamsHandling="merge"
                                            class="btn btn-danger btn-sm">
                                        <fa-icon [icon]="'times'"></fa-icon>
                                        <span class="d-none d-md-inline">Xóa</span>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div *ngIf="areas && areas.length">
                    <div class="row justify-content-center">
                        <jhi-item-count [page]="page" [total]="queryCount" [maxSize]="5" [itemsPerPage]="itemsPerPage"></jhi-item-count>
                    </div>
                    <div class="row justify-content-center">
                        <ngb-pagination [collectionSize]="totalItems" [(page)]="page" [pageSize]="itemsPerPage" [maxSize]="5" [rotate]="true" [boundaryLinks]="true" (pageChange)="loadPage(page)"></ngb-pagination>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
